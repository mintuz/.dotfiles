

var addLeadingComments = require('./addLeadingComments');

/*
 * Copyright (c) 2015-present, Facebook, Inc.
 * All rights reserved.
 *
 * This source code is licensed under the license found in the LICENSE file in
 * the root directory of this source tree.
 */

var addMissingRequires = require('./addMissingRequires');
var addMissingTypes = require('./addMissingTypes');
var formatRequires = require('./formatRequires');
var removeLeadingComments = require('./removeLeadingComments');
var removeUnusedRequires = require('./removeUnusedRequires');
var removeUnusedTypes = require('./removeUnusedTypes');

/**
 * This is the collection of transforms that affect requires.
 */
function transform(root, options) {
  var blacklist = options.blacklist || new Set();
  var comments = undefined;
  if (!blacklist.has('requires.transferComments')) {
    comments = removeLeadingComments(root);
  }
  if (!blacklist.has('requires.removeUnusedRequires')) {
    removeUnusedRequires(root, options);
  }
  if (!blacklist.has('requires.addMissingRequires')) {
    addMissingRequires(root, options);
  }
  if (!blacklist.has('requires.removeUnusedTypes')) {
    removeUnusedTypes(root, options);
  }
  if (!blacklist.has('requires.addMissingTypes')) {
    addMissingTypes(root, options);
  }
  if (!blacklist.has('requires.formatRequires')) {
    formatRequires(root);
  }
  if (!blacklist.has('requires.transferComments')) {
    addLeadingComments(root, comments);
  }
}

module.exports = transform;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRyYW5zZm9ybS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQWVBLElBQU0sa0JBQWtCLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7Ozs7Ozs7Ozs7QUFDM0QsSUFBTSxrQkFBa0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUMzRCxJQUFNLGVBQWUsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNyRCxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNuRCxJQUFNLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0FBQ2pFLElBQU0sb0JBQW9CLEdBQUcsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDL0QsSUFBTSxpQkFBaUIsR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7Ozs7QUFLekQsU0FBUyxTQUFTLENBQUMsSUFBZ0IsRUFBRSxPQUFzQixFQUFRO0FBQ2pFLE1BQU0sU0FBNEIsR0FBRyxPQUFPLENBQUMsU0FBUyxJQUFJLElBQUksR0FBRyxFQUFFLENBQUM7QUFDcEUsTUFBSSxRQUFRLFlBQUEsQ0FBQztBQUNiLE1BQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLEVBQUU7QUFDL0MsWUFBUSxHQUFHLHFCQUFxQixDQUFDLElBQUksQ0FBQyxDQUFDO0dBQ3hDO0FBQ0QsTUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsK0JBQStCLENBQUMsRUFBRTtBQUNuRCx3QkFBb0IsQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDckM7QUFDRCxNQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxFQUFFO0FBQ2pELHNCQUFrQixDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztHQUNuQztBQUNELE1BQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDRCQUE0QixDQUFDLEVBQUU7QUFDaEQscUJBQWlCLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0dBQ2xDO0FBQ0QsTUFBSSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUMsRUFBRTtBQUM5QyxtQkFBZSxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztHQUNoQztBQUNELE1BQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDLEVBQUU7QUFDN0Msa0JBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztHQUN0QjtBQUNELE1BQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLEVBQUU7QUFDL0Msc0JBQWtCLENBQUMsSUFBSSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0dBQ3BDO0NBQ0Y7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxTQUFTLENBQUMiLCJmaWxlIjoidHJhbnNmb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJ3VzZSBiYWJlbCc7XG4vKiBAZmxvdyAqL1xuXG4vKlxuICogQ29weXJpZ2h0IChjKSAyMDE1LXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIGxpY2Vuc2UgZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBpblxuICogdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuaW1wb3J0IHR5cGUge0NvbGxlY3Rpb259IGZyb20gJy4uL3R5cGVzL2FzdCc7XG5pbXBvcnQgdHlwZSB7U291cmNlT3B0aW9uc30gZnJvbSAnLi4vb3B0aW9ucy9Tb3VyY2VPcHRpb25zJztcbmltcG9ydCB0eXBlIHtUcmFuc2Zvcm1LZXl9IGZyb20gJy4uL3R5cGVzL3RyYW5zZm9ybXMnO1xuXG5jb25zdCBhZGRMZWFkaW5nQ29tbWVudHMgPSByZXF1aXJlKCcuL2FkZExlYWRpbmdDb21tZW50cycpO1xuY29uc3QgYWRkTWlzc2luZ1JlcXVpcmVzID0gcmVxdWlyZSgnLi9hZGRNaXNzaW5nUmVxdWlyZXMnKTtcbmNvbnN0IGFkZE1pc3NpbmdUeXBlcyA9IHJlcXVpcmUoJy4vYWRkTWlzc2luZ1R5cGVzJyk7XG5jb25zdCBmb3JtYXRSZXF1aXJlcyA9IHJlcXVpcmUoJy4vZm9ybWF0UmVxdWlyZXMnKTtcbmNvbnN0IHJlbW92ZUxlYWRpbmdDb21tZW50cyA9IHJlcXVpcmUoJy4vcmVtb3ZlTGVhZGluZ0NvbW1lbnRzJyk7XG5jb25zdCByZW1vdmVVbnVzZWRSZXF1aXJlcyA9IHJlcXVpcmUoJy4vcmVtb3ZlVW51c2VkUmVxdWlyZXMnKTtcbmNvbnN0IHJlbW92ZVVudXNlZFR5cGVzID0gcmVxdWlyZSgnLi9yZW1vdmVVbnVzZWRUeXBlcycpO1xuXG4vKipcbiAqIFRoaXMgaXMgdGhlIGNvbGxlY3Rpb24gb2YgdHJhbnNmb3JtcyB0aGF0IGFmZmVjdCByZXF1aXJlcy5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtKHJvb3Q6IENvbGxlY3Rpb24sIG9wdGlvbnM6IFNvdXJjZU9wdGlvbnMpOiB2b2lkIHtcbiAgY29uc3QgYmxhY2tsaXN0OiBTZXQ8VHJhbnNmb3JtS2V5PiA9IG9wdGlvbnMuYmxhY2tsaXN0IHx8IG5ldyBTZXQoKTtcbiAgbGV0IGNvbW1lbnRzO1xuICBpZiAoIWJsYWNrbGlzdC5oYXMoJ3JlcXVpcmVzLnRyYW5zZmVyQ29tbWVudHMnKSkge1xuICAgIGNvbW1lbnRzID0gcmVtb3ZlTGVhZGluZ0NvbW1lbnRzKHJvb3QpO1xuICB9XG4gIGlmICghYmxhY2tsaXN0LmhhcygncmVxdWlyZXMucmVtb3ZlVW51c2VkUmVxdWlyZXMnKSkge1xuICAgIHJlbW92ZVVudXNlZFJlcXVpcmVzKHJvb3QsIG9wdGlvbnMpO1xuICB9XG4gIGlmICghYmxhY2tsaXN0LmhhcygncmVxdWlyZXMuYWRkTWlzc2luZ1JlcXVpcmVzJykpIHtcbiAgICBhZGRNaXNzaW5nUmVxdWlyZXMocm9vdCwgb3B0aW9ucyk7XG4gIH1cbiAgaWYgKCFibGFja2xpc3QuaGFzKCdyZXF1aXJlcy5yZW1vdmVVbnVzZWRUeXBlcycpKSB7XG4gICAgcmVtb3ZlVW51c2VkVHlwZXMocm9vdCwgb3B0aW9ucyk7XG4gIH1cbiAgaWYgKCFibGFja2xpc3QuaGFzKCdyZXF1aXJlcy5hZGRNaXNzaW5nVHlwZXMnKSkge1xuICAgIGFkZE1pc3NpbmdUeXBlcyhyb290LCBvcHRpb25zKTtcbiAgfVxuICBpZiAoIWJsYWNrbGlzdC5oYXMoJ3JlcXVpcmVzLmZvcm1hdFJlcXVpcmVzJykpIHtcbiAgICBmb3JtYXRSZXF1aXJlcyhyb290KTtcbiAgfVxuICBpZiAoIWJsYWNrbGlzdC5oYXMoJ3JlcXVpcmVzLnRyYW5zZmVyQ29tbWVudHMnKSkge1xuICAgIGFkZExlYWRpbmdDb21tZW50cyhyb290LCBjb21tZW50cyk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0cmFuc2Zvcm07XG4iXX0=